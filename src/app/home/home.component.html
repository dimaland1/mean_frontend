<app-navbar></app-navbar>
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center mb-6">Faire une recherche</h1>
    <div class="flex justify-center">
        <form [formGroup]="searchForm" (ngSubmit)="onSubmit()" class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">

            <div class="flex">
                <div class="mb-4 w-56 mr-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="startDate">
                        Date de début de location*
                    </label>
                    <input required formControlName="startDate"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="startDate" type="date">
                </div>
                <div class="mb-4 w-56 mr-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="endDate">
                        Date de fin de location*
                    </label>
                    <input required formControlName="endDate"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="endDate" type="date">
                </div>

                <div class=" w-56 mr-6 ">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="location">
                        commune*
                    </label>
                    <input required formControlName="location"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="location" type="text" placeholder="Entrez une commune">
                </div>

                <div class="flex items-center justify-between">
                    <button
                        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                        type="submit">
                        Rechercher
                    </button>
                </div>
            </div>

            <div class="flex">
                <div class="mb-4 w-56 mr-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="maxPrice">
                        Prix max
                    </label>
                    <input formControlName="maxPrice"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="maxPrice" type="number" placeholder="Prix max">
                </div>
                <div class="mb-4 w-56 mr-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="minRooms">
                        Nombre de chambres min
                    </label>
                    <input formControlName="minRooms" name="minRooms"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="minRooms" type="number" placeholder="Nombre de chambres min">
                </div>
                <div class="mb-4 w-56 mr-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="minBeds">
                        Nombre de couchages min
                    </label>
                    <input formControlName="minBeds"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="minBeds" type="number" placeholder="Nombre de couchages min">
                </div>
                <div class="mb-4 w-56">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="maxDistance">
                        Distance max du centre ville
                    </label>
                    <input formControlName="maxDistance"
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="maxDistance" type="number" placeholder="Distance max au centre ville (mètres)">
                </div>

            </div>

        </form>
    </div>

    <div class="row">

        <div class="col-md-4" *ngFor="let bien of biens">
            <div class="bg-white shadow-lg rounded-lg p-6 mb-2">
                <div class="flex flex-col md:flex-row">
                    <div class="md:flex-shrink-0">
                        <img class="rounded-lg md:w-56" [src]="bien.imageUrl" alt="Image du produit">
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-6">
                        <h2 class="text-xl font-bold text-gray-900">{{bien.rue}} , {{ bien.cp}} {{ bien.commune }}</h2>

                        <div class="flex mt-3">
                            <span class="text-green-500 mr-3">Prix total : $ {{bien.prixTotal}}</span>
                            <span class="text-gray-500">Pour {{bien.nbJour}} jours</span>
                        </div>

                        <div class="flex flex-col mt-3">
                            <span class="text-gray-500">Nombre de chambres : {{bien.nbChambres}}</span>
                            <span class="text-gray-500">Nombre de couchages : {{bien.nbCouchages}}</span>
                        </div>


                        <div class="mt-3">
                            <span class="text-gray-700">Note moyennes : {{bien.moyenne}} / 10</span>
                        </div>

                        <div class="mt-3">
                            <span class="text-gray-700">Distance : {{bien.distance}} m</span>
                        </div>

                        <div class="mt-6" *ngIf="isLogged">
                            <button
                                class="px-4 py-2 bg-blue-500 text-white text-xs font-bold uppercase rounded hover:bg-blue-600"
                                (click)="creationLocation(bien.idBien)">Louer maintenant</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
</div>